<template>
    <section class="py-32">
        <div class="w-full flex flex-col gap-y-4 max-w-[58rem] mx-auto px-4">

            <!-- message 1 -->
            <div class="message opacity-0 w-fit relative flex flex-col items-end self-end">
                <img class="z-0 h-full object-contain absolute top-0 left-0 scale-x-[107%] -translate-x-[3%]" src="/images/for_you/message_green_bubble.svg" alt="message_green_bubble">
                <p class="z-10  pr-4 pt-4 w-[18.5rem]">
                    Digitalisierung auch mal in meiner 
                    Stadtverwaltung und nicht nur in 
                    der Tagesschau?
                </p>
                <div class="z-10 w-full pr-2 pb-9 flex items-center justify-end gap-x-1">
                    <div class="text-[#B4AEAE]">18:07</div>
                    <svg class="w-8 h-6" viewBox="0 0 31 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M8.99625 16.1698L4.82625 11.9998L3.40625 13.4098L8.99625 18.9998L20.9963 6.99984L19.5863 5.58984L8.99625 16.1698Z" fill="#2997FC"/>
                        <path d="M15.9963 16.1698L11.8262 11.9998L10.4062 13.4098L15.9963 18.9998L27.9963 6.99984L26.5863 5.58984L15.9963 16.1698Z" fill="#2997FC"/>
                    </svg>
                </div>
            </div>

            <!-- message 2 -->
            <div class="message opacity-0 w-fit relative flex items-center gap-x-3 pb-6 ">
                <img class="z-0 w-full object-contain absolute -top-2 left-0 scale-y-[80%]" src="/images/for_you/message_blue_bubble_sm.svg" alt="message_green_bubble">
                <p class="z-10  pl-4 pt-3 text-white grow w-full">
                    Haha, wirdÂ´s das je geben?  ðŸ˜„
                </p>
                <div class="z-10 flex pt-3 pr-4 items-center justify-end gap-x-1 grow-0">
                    <div class="text-[#B4AEAE]">18:07</div>
                </div>
            </div>
            
            <!-- message 3 -->
            <div  class="message opacity-0 w-fit relative flex flex-col items-end self-end">
                <img class="z-0 h-full object-fill absolute top-0 left-0 scale-x-[107%] -translate-x-[3%]" src="/images/for_you/message_green_bubble.svg" alt="message_green_bubble">
                <p class="z-10 pr-4  pt-4 w-[18.5rem]">
                    Digitalisierung auch mal in meiner 
                    Stadtverwaltung und nicht nur in 
                    der Tagesschau?
                </p>
                <div class="z-10 w-full pr-2 pb-9 flex items-center justify-end gap-x-1">
                    <div class="text-[#B4AEAE]">18:07</div>
                    <svg class="w-8 h-6" viewBox="0 0 31 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M8.99625 16.1698L4.82625 11.9998L3.40625 13.4098L8.99625 18.9998L20.9963 6.99984L19.5863 5.58984L8.99625 16.1698Z" fill="#2997FC"/>
                        <path d="M15.9963 16.1698L11.8262 11.9998L10.4062 13.4098L15.9963 18.9998L27.9963 6.99984L26.5863 5.58984L15.9963 16.1698Z" fill="#2997FC"/>
                    </svg>
                </div>
            </div>

            <!-- message 4 -->
            <div class="message opacity-0 w-fit relative flex flex-col items-center gap-x-3 pb-6">
                <img class="z-0 w-full object-fill absolute -top-3 left-0 scale-y-[87%]" src="/images/for_you/message_blue_bubble.svg" alt="message_green_bubble">
                <p class="z-10  px-4 pt-3 text-white grow w-[19.5rem]">
                    VerrÃ¼ckt, dann wÃ¤rst du wohl auch 
                    mal am Start?  ðŸ˜œ
                </p>
                <div class="w-full z-10 pr-4 flex justify-end gap-x-1 grow-0 mt-auto">
                    <div class="text-[#B4AEAE]">18:07</div>
                </div>
            </div>

            <!-- message 5 -->
            <div class="message opacity-0 w-fit relative flex flex-col items-end self-end">
                <img class="z-0 h-full object-fill absolute top-0 left-0 scale-y-[105%] scale-x-[107%] -translate-x-[3%]" src="/images/for_you/message_green_bubble.svg" alt="message_green_bubble">
                <p class="z-10 pr-4  pt-4 w-[17rem]">
                    Mal so einfach einkaufen wie 
                    auf Amazon, aber ohne 
                    schlechtes Gewissen?
                </p>
                <div class="z-10 w-full pr-2 pb-9 flex items-center justify-end gap-x-1">
                    <div class="text-[#B4AEAE]">18:07</div>
                    <svg class="w-8 h-6" viewBox="0 0 31 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M8.99625 16.1698L4.82625 11.9998L3.40625 13.4098L8.99625 18.9998L20.9963 6.99984L19.5863 5.58984L8.99625 16.1698Z" fill="#2997FC"/>
                        <path d="M15.9963 16.1698L11.8262 11.9998L10.4062 13.4098L15.9963 18.9998L27.9963 6.99984L26.5863 5.58984L15.9963 16.1698Z" fill="#2997FC"/>
                    </svg>
                </div>
            </div>

            <!-- message 6 -->
            <div class="message opacity-0 w-fit relative flex items-center gap-x-3 pb-6 ">
                <img class="z-0 w-full object-contain absolute -top-0.5 left-0 scale-y-[90%]" src="/images/for_you/message_blue_bubble_sm.svg" alt="message_green_bubble">
                <p class="z-10  pl-4 pt-3 text-white grow w-full">
                    Du hast ja AnsprÃ¼che...  
                </p>
                <div class="z-10 flex pt-3 pr-4 items-center justify-end gap-x-1 grow-0">
                    <div class="text-[#B4AEAE]">18:07</div>
                </div>
            </div>

            <!-- message 7 -->
            <div class="message opacity-0 w-fit relative flex flex-col items-center gap-x-3 pb-8 px-4 pt-4">
                <img class="z-0 w-full object-fill absolute -top-0 left-0 scale-y-" src="/images/for_you/message_blue_bubble_lg.svg" alt="message_green_bubble">
                <div class="z-10 rounded-2xl overflow-hidden flex-col ">
                    <img class="w-full" src="/images/for_you/message_7_img.svg" alt="message_7_img">
                    <div class="px-4 py-3 bg-white/10 text-white">
                        <div>IndieZone - Home</div>
                        <div>The sustainable Heart of your City</div>
                    </div>
                </div>
                <div class="z-10  px-4 pt-3 text-white grow w-[19.5rem] flex flex-col gap-y-2 mt-2">
                    <p>Kannst du alles haben:</p>
                    <p class="text-blue-400 underline underline-offset-2" >IndieZone.de</p>   
                </div>
                
                <div class="w-full z-10  flex justify-end gap-x-1 grow-0 mt-auto">
                    <div class="text-[#B4AEAE]">18:07</div>
                </div>
            </div>

        </div>

    </section>
</template>

<script setup>

const messages= ref(null)

function slideAnimation() {
    messages.value.forEach(message => {
        let message_rect = message.getBoundingClientRect()
        if(message_rect.top  < window.innerHeight-200){
            if (!message.classList.contains('appear')) {
                message.classList.add('appear');
            }
        }else if(message_rect.top  > window.innerHeight){
            if (message.classList.contains('appear')) {
                message.classList.remove('appear');
            }
        }
    });
}
onMounted(() => {
    messages.value = [...document.querySelectorAll('.message')]
    slideAnimation()
    window.addEventListener('scroll', slideAnimation)
    window.addEventListener('resize', slideAnimation)
        
})
onUnmounted(() => {
    window.removeEventListener('scroll', slideAnimation)
    window.removeEventListener('resize', slideAnimation)
})
</script>

<style scoped>
    .appear {
        animation-name: slideUp;
        animation-duration: 0.5s;
        animation-timing-function: ease-out;
        animation-fill-mode: forwards;
    }

@keyframes slideUp {
  0% {
    opacity: 0;
    transform: translateY(400px);
  }
  100% {
    opacity: 1;
    transform: translateY(0);
  }
}
</style>